<%= render "info", group: @group %>
<hr />
<ul class="nav nav-tabs justify-content-center mb-5">
  <li class="nav-item">
    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#chat" type="button">
      Chat
    </button>
  </li>
  <li class="nav-item">
    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#works" type="button">
      Works
    </button>
  </li>
  <li class="nav-item">
    <% if @group.includesUser?(current_user) %>
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#post" type="button">
        Work Post
      </button>
    <% else %>
      <button class="nav-link" data-bs-toggle="tab tooltip" data-bs-target="#post" type="button" data-placement="bottom" title="need to join">
        Unable to Work Post
      </button>
    <% end %>
  </li>
</ul>
<div class="tab-content">
  <div id="chat" class="tab-pane active">
    <% if @group.includesUser?(current_user) %>
      <%= render "chats/form" %>
    <% end %>
    <%= render 'chats/index' %>
  </div>
</div>
<div class="tab-content">
  <div id="works" class="tab-pane">
    <div class="container">
        <div class="row">
         <% @works.each do |work| %>
          <div class="text-center mb-5 col-lg-2">
            <%= link_to work_path(work.id), class: "text-dark" do %>
              <div class="card">
                <div class="card-body">
                  <i class="fa-solid fa-music fa-3x m-2"></i>
                  <h5 class="card-title text-truncate"><%= work.title %></h5>
                  <p class="card-text text-truncate"><%= work.introduction %></p>
                </div>
              </div>
            <% end %>
            <%= link_to user_path(work.user.id), class: "text-dark" do %>
              <div class="mt-3"><%= image_tag work.user.get_profile_image(50, 50), class: "rounded-circle border" %> <%= work.user.name %></div>
            <% end %>
          </div>
         <% end %>
        </div>
        <%= paginate @works %>
      </div>
  </div>
</div>
<div class="tab-content">
  <div id="post" class="tab-pane">
    <%= render "works/form", work: @work %>
  </div>
</div>
